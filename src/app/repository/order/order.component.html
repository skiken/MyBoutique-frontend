<br>
<div class=" contente">
  <br><br>
  <div class=" row">
    <div class=" col-md-8">
      <div class=" card">
        <div class=" card-header">
          <h5 class=" title"> Mes Informations</h5>
        </div>

        <div class=" card-body" *ngIf="customer">

          <form *ngIf="!isSuccessful" name="form">
            <div class=" row">
              <div class="col-md-4 pr-md-1">
                <div class=" form-group">
                  <label for="exampleInputEmail1"> Email address </label>
                  <H1 class=" form-control">{{customer.email}}</H1>
                </div>
              </div>
            </div>

            <div class=" row">
              <div class="col-md-4 pr-md-1">
                <div class=" form-group">
                  <label>Telephone </label>
                  <H1 class=" form-control">{{customer.telephone}}</H1>
                </div>
              </div>
            </div>
            <h5 class=" title"> Adresse de Livraison</h5>
            <div class=" row">
              <div class=" col-md-12">
                <div class=" form-group">
                  <label> Address </label>
                  <H1 class=" form-control">{{customer.address.address}}</H1>
                </div>
              </div>
            </div>

            <div class=" row">
              <div class="col-md-4 pr-md-1">
                <div class=" form-group">
                  <label> City </label>
                  <H1 class=" form-control">{{customer.address.city}}</H1>
                </div>
              </div>

              <div class=" col-md-4 px-md-1">
                <div class=" form-group">
                  <label> Country </label>
                  <H1 class=" form-control">{{customer.address.country}}</H1>
                </div>
              </div>

              <div class=" col-md-4 pl-md-1">
                <div class=" form-group">
                  <label> Postal Code </label>
                  <H1 class=" form-control">{{customer.address.postcode}}</H1>
                </div>
              </div>
            </div>

            <div class="form-group">
              <button (click)="openModificationPopup(content)" class=" btn btn-fill btn-danger">Modifer mes
                Informations</button>
            </div>
          </form>

        </div>
      </div>
    </div>
    <!-----------------------------------------modification popup-------------------------------------------->
    <ng-template #content let-modal>
      <div class="modal-header">
        <h4 class="modal-title">Modifier information </h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class=" card">
          <div class=" card-header">
            <h5 class=" title">Edit Profile</h5>
          </div>
          <div class=" card-body" *ngIf="newCustomer">

            <form *ngIf="!isSuccessful" name="form" id="formUpdate" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm"
              novalidate>
              <div class=" row">
                <div class=" col-md-6 pr-md-1">
                  <div class=" form-group">
                    <label for="exampleInputEmail1"> Email address </label>
                    <input class=" form-control" type="email" name="email" [(ngModel)]="newCustomer.email" required
                      email #email="ngModel" />
                  </div>
                  <div class="text-danger" *ngIf="f.submitted && email.invalid">
                    <div *ngIf="email.errors.required">Email is required</div>
                    <div *ngIf="email.errors.email">
                      Email must be a valid email address
                    </div>
                  </div>
                </div>
              </div>

              <div class=" row">

                <div class=" col-md-6 pr-md-1">
                  <div class=" form-group">
                    <label>FirstName </label>
                    <input class=" form-control" type="text" name="firstName" [(ngModel)]="newCustomer.firstName"
                      required firstName #firstName="ngModel" />
                  </div>
                  <div class="text-danger" *ngIf="f.submitted && firstName.invalid">
                    <div *ngIf="firstName.errors.required">FirstName is required</div>
                  </div>
                </div>

                <div class=" col-md-4 pl-md-1">
                  <div class=" form-group">
                    <label>LastName </label>
                    <input class=" form-control" type="text" name="lastName" [(ngModel)]="newCustomer.lastName" required
                      lastName #lastName="ngModel" />
                  </div>
                  <div class="text-danger" *ngIf="f.submitted && lastName.invalid">
                    <div *ngIf="lastName.errors.required">LastName is required</div>
                  </div>
                </div>

                <div class=" col-md-4 pr-md-1">
                  <div class=" form-group">
                    <label>Telephone </label>
                    <input class=" form-control" type="text" name="telephone" [pattern]="mobNumberPattern"
                      [(ngModel)]="newCustomer.telephone" required telephone #telephone="ngModel" />
                  </div>
                  <div class="text-danger" *ngIf="f.submitted && telephone.invalid">
                    <div *ngIf="telephone.errors.required">telephone is required</div>
                    <div *ngIf="telephone.errors.pattern">
                      Mobile number not valid.
                    </div>
                  </div>
                </div>

              </div>

              <div class=" row">

                <div class=" col-md-12">
                  <div class=" form-group">
                    <label> Address </label>
                    <input class=" form-control" type="text" [(ngModel)]="newCustomer.address.address" name="address"
                      #address="ngModel" required />
                    <div class="text-danger" *ngIf="f.submitted && address.invalid">
                      <div *ngIf="address.errors.required">Address is required</div>
                    </div>
                  </div>
                </div>


                <div class=" col-md-4 pr-md-1">
                  <div class=" form-group">
                    <label> City </label>
                    <input class=" form-control" type="text" [(ngModel)]="newCustomer.address.city" name="city"
                      #city="ngModel" required />
                    <div class="text-danger" *ngIf="f.submitted && city.invalid">
                      <div *ngIf="city.errors.required">city is required</div>
                    </div>

                  </div>
                </div>

                <div class=" col-md-4 px-md-1">
                  <div class=" form-group">
                    <label> Country </label>
                    <input class=" form-control" type="text" [(ngModel)]="newCustomer.address.country" name="country"
                      #country="ngModel" required />
                    <div class="text-danger" *ngIf="f.submitted && country.invalid">
                      <div *ngIf="country.errors.required">country is required</div>
                    </div>
                  </div>
                </div>

                <div class=" col-md-4 pl-md-1">
                  <div class=" form-group">
                    <label> Postal Code </label>
                    <input class=" form-control" type="text" [pattern]="postalNumberPattern" name="postcode"
                      [(ngModel)]="newCustomer.address.postcode" postcode #postcode="ngModel" required />
                  </div>
                  <div class="text-danger" *ngIf="f.submitted && postcode.invalid">
                    <div *ngIf="postcode.errors.pattern">
                      Postal code must contain 4 number
                    </div>
                    <div *ngIf="postcode.errors.required">postcode is required</div>
                  </div>
                </div>
              </div>

              <div class="form-group">
                <button class=" btn btn-fill btn-danger">Save</button>
              </div>
            </form>
            <div class="alert alert-success" *ngIf="isSuccessful">
              Modification Done
            </div>
          </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
      </div>

    </ng-template>
    <!------------------------------------------endModificationPopup------------------------------------------------------------>
    <!------------------------------------------------------------------------------------------------------------------------------>
    <div class=" col-md-4">
      <div class=" card card-user">
        <div class=" card-body">
          <br>
          <span class="pull-left">Valeur de la Commande :</span><span class="pull-right">{{commandPrice}}
            dt</span><br>
          <span class="pull-left">Livraiosn : </span><span class="pull-right">{{deliveryPrice}} dt</span><br>
          <hr>
          <span class="pull-left">Total : </span><span class="pull-right">{{totalPrice}} dt</span><br>
          <br>
          <h5 class=" title">Details de la Commande </h5> 

       
          <div *ngFor="let product of productList" >
            <div>
              <div class="pull-left">
                <img class="logo " style="padding-right: 20px;" src="/assets/img/{{product.imgPath}}">
              </div>
              <div *ngFor="let orderItem of orderItemsList">
                <div class="pull-center" *ngIf="product.id==orderItem.productId">
                  <code>{{product.name}}</code>
                  <pre>{{product.price}} dt x{{orderItem.quantity}}</pre>
                </div>
              </div>
              <br>
            </div>
          </div>
      

          <p class=" text-primary">En confirmant la commande, vous allez recevoir un code de confirmation par SMS.
            Entrer le code pour valider votre commande </p>
          <button class="btn  btn-block btn-primary" (click)="openSmsDiv()">Confirmer la Commande</button>
          <div class="alert alert-warning" *ngIf="validAddressError" style="text-align: center;">
            <span class="tim-icons icon-bell-55"> </span>
            Vous devez avoir un numero de telephone valide pour confirmer votre commande 
            <i class=" tim-icons icon-simple-remove pull-right" (click)="hideAddressError()"> </i>
          </div>
          <div class="alert alert-warning" *ngIf="validTelError" style="text-align: center;">
            <span class="tim-icons icon-bell-55"> </span>
            Vous devez renseigner votre address complete pour confirmer votre commande
            <i class=" tim-icons icon-simple-remove pull-right" (click)="hideTelError()"> </i>
          </div>
          <div *ngIf="smsDiv">
            <code-input [isCodeHidden]="false" [codeLength]="5" (codeChanged)="onCodeChanged($event)"
              (codeCompleted)="onCodeCompleted($event)">
            </code-input>
            <div class=" nav-item" ngbDropdown>
              <a class=" nav-link" data-toggle="dropdown" href="javascript:void(0)" ngbDropdownToggle>
                <p class=" title" (click)="sendAnotherSms()">*RENVOYER LE CODE DE VERIFICATION
                  <i class=" tim-icons icon-send"> </i></p>
              </a>
              <div class="alert alert-danger" *ngIf="errorCodeMessage" style="text-align: center;">
                <span class="tim-icons icon-bell-55"> </span>
                 Code Invalide  
              </div>
            </div>
          </div>
          <br><br>
          <button class="btn  btn-block" (click)="cancelOrder()">Annuler la Commande</button>
        </div>
      </div>
    </div>
    <!------------------------------------------------------------------------------------------------------------------------------>

  <!-----------------------------------------Command success message popup-------------------------------------------->
  <div [style.display]="showModal ? 'block' : 'none'" class="modal" id="imagemodal" tabindex="-1"
  role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-body">
            Felicitation, Votre commande est valid√©e, vous allez etre alerter lors de la livraison.
            <br>
            Merci pour votre confiance  <i class=" tim-icons icon-satisfied"> </i>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-dark pull-right" data-dismiss="modal"
                  (click)="hideValidationPopUp()">Close</button>
          </div>
      </div>
  </div>
</div>
  <!------------------------------------------------End command success message popup----------------------------------------------------->





  </div>
</div>